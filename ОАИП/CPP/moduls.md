# Лекция: Модульное программирование

**Модульное программирование** — это подход к разработке программ, который основывается на разделении программы на независимые, взаимосвязанные блоки, называемые **модулями**. Каждый модуль решает определённую задачу и может быть разработан, протестирован и отлажен отдельно от других модулей. Такой подход повышает читаемость кода, упрощает поддержку и позволяет командам программистов работать над разными частями проекта одновременно.

### Понятие модуля

**Модуль** — это часть программы, которая может быть использована независимо от других частей программы. Модуль включает в себя функции, переменные и типы данных, которые могут быть скрыты (private) или доступны для использования другими модулями (public).

В C++ модулем может считаться файл заголовка (header) и файл реализации:

1. **Заголовочный файл** (`*.h`) — содержит объявления (прототипы функций, классов и переменных), которые могут быть использованы другими модулями.
2. **Файл реализации** (`*.cpp`) — содержит определения функций, классов и других элементов программы.

### Структура модуля

Модуль обычно состоит из двух частей:

1. **Интерфейс модуля**:
    - Описывается в заголовочном файле (`*.h`).
    - Содержит объявления функций, классов и переменных, которые могут быть использованы другими модулями.
    - Пример заголовочного файла:
      ```cpp
      // math_operations.h
      #ifndef MATH_OPERATIONS_H
      #define MATH_OPERATIONS_H

      int add(int a, int b);
      int subtract(int a, int b);

      #endif // MATH_OPERATIONS_H
      ```

2. **Реализация модуля**:
    - Описывается в файле исходного кода (`*.cpp`).
    - Содержит реализацию функций и классов, объявленных в заголовочном файле.
    - Пример файла реализации:
      ```cpp
      // math_operations.cpp
      #include "math_operations.h"

      int add(int a, int b) {
          return a + b;
      }

      int subtract(int a, int b) {
          return a - b;
      }
      ```

### Компиляция и компоновка программы

В процессе разработки программы на C++ используется два основных этапа:

1. **Компиляция (Compilation)** — процесс перевода исходного кода из языка высокого уровня (например, C++) в машинный код или промежуточный объектный код (object files). Каждый модуль компилируется отдельно, что позволяет ускорить процесс разработки, так как изменения в одном модуле не требуют перекомпиляции всех других модулей. Компилятор создает объектные файлы (`*.o` или `*.obj`) для каждого исходного файла.

   Пример команды компиляции:
   ```bash
   g++ -c math_operations.cpp -o math_operations.o
   ```

2. **Компоновка (Linking)** — процесс объединения всех скомпилированных объектных файлов и библиотек в один исполняемый файл. На этом этапе программа собирается в единое целое, и разрешаются все внешние ссылки (например, вызовы функций, реализованных в других модулях).

   Пример команды компоновки:
   ```bash
   g++ main.o math_operations.o -o my_program
   ```

### Пример программы с модулями

```cpp
// main.cpp
#include <iostream>
#include "math_operations.h"

int main() {
    int a = 10, b = 5;

    std::cout << "Add: " << add(a, b) << std::endl;
    std::cout << "Subtract: " << subtract(a, b) << std::endl;

    return 0;
}
```

Этот пример программы включает два модуля:
- `math_operations.h` и `math_operations.cpp` — модуль с математическими операциями.
- `main.cpp` — основной модуль, который использует функции модуля `math_operations`.


###  **Концепции C++20**

####  **Модули (Modules)**
Модули позволяют разбивать код на логические единицы, улучшая инкапсуляцию и ускоряя компиляцию. В отличие от традиционных заголовочных файлов, модули могут компилироваться отдельно, что уменьшает дублирование кода при компиляции.

Пример модуля:
```cpp
// my_module.ixx
export module my_module;

export int add(int a, int b) {
    return a + b;
}

// main.cpp
import my_module;
#include <iostream>

int main() {
    std::cout << add(3, 4) << std::endl;
    return 0;
}
```

Модульное программирование делает код более гибким, удобным для расширения и поддержки.