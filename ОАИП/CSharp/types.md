# Типы данных в C#

Типы данных в C# определяют, какой вид данных может храниться в переменной, а также объем памяти, необходимый для хранения. Типы данных являются основой для любого программного языка, и в C# они играют ключевую роль в написании надежного и эффективного кода.

#### Классификация типов данных

Типы данных в C# делятся на две большие категории:
1. **Простые типы данных (значимые типы)** — это типы, которые хранят значения непосредственно.
2. **Ссылочные типы данных** — это типы, которые хранят ссылку на объект, расположенный в куче памяти.

### Значимые типы данных

Значимые типы хранят данные в памяти стека, что обеспечивает высокую скорость доступа. Когда значение значимого типа присваивается новой переменной, создается полная копия данных.

1. **Простые числовые типы**
   - **Целочисленные**:
     - `byte` (1 байт) — диапазон: от 0 до 255. (`System.Byte`)
     - `sbyte` (1 байт) — диапазон: от -128 до 127. (`System.SByte`)
     - `short` (2 байта) — диапазон: от -32,768 до 32,767. (`System.Int16`)
     - `ushort` (2 байта) — диапазон: от 0 до 65,535. (`System.UInt16`)
     - `int` (4 байта) — диапазон: от -2,147,483,648 до 2,147,483,647. (`System.Int32`)
     - `uint` (4 байта) — диапазон: от 0 до 4,294,967,295. (`System.UInt32`)
     - `long` (8 байт) — диапазон: от -9,223,372,036,854,775,808 до 9,223,372,036,854,775,807. (`System.Int64`)
     - `ulong` (8 байт) — диапазон: от 0 до 18,446,744,073,709,551,615. (`System.UInt64`)

   - **Числа с плавающей точкой**:
     - `float` (4 байта) — прибл. 6-9 знаков после запятой. (`System.Single`)
     - `double` (8 байт) — прибл. 15-17 знаков после запятой. (`System.Double`)
     - `decimal` (16 байт) — предназначен для финансовых и валютных расчетов, точность до 28-29 знаков. (`System.Decimal`)

2. **Логический тип**
   - `bool` (1 байт) — принимает значения `true` или `false`. (`System.Boolean`)

3. **Символьный тип**
   - `char` (2 байта) — представляет одиночный символ Unicode. (`System.Char`)

4. **Структуры и перечисления**
   - `struct` — позволяет создавать собственные значимые типы данных. Структуры содержат как данные, так и методы.
   - `enum` — используется для создания набора именованных констант. Поддерживает любые целочисленные типы, но обычно используется с `int`.

### Ссылочные типы данных

Ссылочные типы хранят ссылку на объект в памяти (куче), и могут быть null. При копировании ссылки на объект копируется только ссылка, а не данные самого объекта.

1. **Классы**
   - Классы — это ключевые компоненты объектно-ориентированного программирования. Они позволяют объединять данные и методы в единый объект. Объекты классов создаются в куче памяти, и на них ссылаются переменные ссылочного типа.

2. **Интерфейсы**
   - Интерфейсы содержат объявления методов и свойств, которые должен реализовать класс. Они не содержат реализацию методов, а лишь задают контракт для классов.

3. **Массивы**
   - Массивы представляют собой коллекцию элементов одинакового типа. Массивы в C# являются ссылочными типами, и при создании массива в памяти выделяется блок для элементов и ссылка на него.

4. **Строки (string)**
   - `string` в C# — это неизменяемый тип данных, предназначенный для работы с текстом. Он является ссылочным, но работает как значимый тип, благодаря чему доступ к данным реализуется оптимально. Каждое изменение строки приводит к созданию новой строки в памяти.

5. **Объекты (object)**
   - `object` является базовым типом для всех других типов данных в C#. Все классы и типы в C# по умолчанию наследуются от `object`, поэтому любая переменная или объект может быть приведен к типу `object`.

6. **Динамический тип (dynamic)**
   - `dynamic` позволяет отключить проверку типов во время компиляции и перенести ее на время выполнения программы. Это может быть полезно при работе с типами, которые определяются динамически, например, при взаимодействии с COM или динамическими языками.

### Значимые и ссылочные типы в памяти

- **Значимые типы** хранятся в стеке. При присвоении значения переменной создается копия.
- **Ссылочные типы** хранятся в куче. Переменные, которые ссылаются на объект, хранятся в стеке, а объект — в куче.

### Преобразование типов

1. **Неявное преобразование** выполняется автоматически компилятором, если нет потери данных. Например, `int` может быть неявно преобразован в `long`.
2. **Явное преобразование** требует указания типа вручную, например, `(int)` для преобразования `double` в `int`. Оно может привести к потере данных и требует осторожности.
3. **Конвертация** использует методы класса `Convert`, например `Convert.ToInt32`, для преобразования между различными типами данных.
4. **Парсинг из строки** требует вызова метода `Parse` или `TryParse` для конкретного типа данных, например `int.Parse("5")`.

### Особые типы данных

1. **Nullable-типы**: позволяет значимым типам принимать значение `null`. Например, `int?` — это `int`, который может быть `null`.
2. **Кортежи (Tuple)**: типы данных, которые позволяют хранить набор значений различных типов. Кортежи полезны для возвращения нескольких значений из методов.
3. **Типы значений и ссылок на стеки (Span и Memory)**: полезны для управления памятью и производительности.

### Примеры кода для работы с типами данных

#### 1. Примеры значимых типов:

```csharp
int a = 10;
float b = 5.5f;
bool isActive = true;
char symbol = 'A';
decimal salary = 1234.56m;
```

#### 2. Примеры ссылочных типов:

```csharp
string message = "Hello, world!";
object obj = new object();
int[] numbers = new int[] { 1, 2, 3, 4, 5 };
```

#### 3. Пример nullable-типа:

```csharp
int? nullableInt = null;
if (nullableInt.HasValue)
{
    Console.WriteLine("Nullable int has a value");
}
```