# Основы WinForms

**Windows Forms (WinForms)** — это библиотека для создания приложений с графическим интерфейсом пользователя (GUI) на платформе .NET. Она предоставляет средства для быстрого создания пользовательских интерфейсов и работы с событиями.

**Преимущества WinForms:**
- Простота использования.
- Быстрое создание интерфейсов.
- Большое количество стандартных компонентов.
- Интеграция с Windows API.

**Примеры использования:**
- Утилиты для автоматизации.
- Небольшие корпоративные приложения.
- Клиентские приложения с базовыми функциями GUI.

## Архитектура WinForms

WinForms строится на основе **оконной модели Windows**, где интерфейс состоит из:
- **Формы (Form)** — основное окно приложения.
- **Контролов (Control)** — элементы управления (кнопки, текстовые поля, списки и т.д.).

## Создание проекта

1. Откройте Visual Studio.
2. Выберите **Создать новый проект** → **Приложение Windows Forms (Майкрософт)**.
3. Укажите имя проекта и нажмите **Создать**.

## Основная структура

При создании проекта будет создан файл `Form1.cs`, который представляет главную форму приложения. Основные элементы:
- `Form1.cs` — файл с кодом C# для формы.
- `Program.cs` — файл, содержащий точку входа в приложение.

Содержимое `Program.cs`:
```csharp
internal static class Program
{
    [STAThread]
    static void Main()
    {
        ApplicationConfiguration.Initialize();
        Application.Run(new Form1());
    }
}
```

Метод `Application.Run(new Form1())` запускает приложение со стартовой формой `Form1`

## Работа с формами

1. **Открытие новой формы**:
   ```csharp
   Form secondForm = new Form();
   secondForm.Text = "Вторая форма";
   secondForm.Show();
   ```

2. **Закрытие текущей формы**:
   ```csharp
   this.Close();
   ```

3. **Диалоговые окна**:
   ```csharp
   OpenFileDialog openFileDialog = new OpenFileDialog();
   if (openFileDialog.ShowDialog() == DialogResult.OK)
   {
       MessageBox.Show($"Вы выбрали файл: {openFileDialog.FileName}");
   }
   ```

## **События в WinForms**

События в WinForms являются одним из ключевых механизмов взаимодействия между пользователем и приложением. Они позволяют приложению реагировать на действия пользователя, такие как нажатие кнопки, ввод текста, перемещение мыши и др.

Событие — это сигнал, который возникает в ответ на определённое действие. Например:
- Нажатие кнопки мыши вызывает событие `Click`.
- Изменение текста в текстовом поле вызывает событие `TextChanged`.
- Наведение мыши на элемент вызывает событие `MouseEnter`.

События реализованы на основе _делегатов_ и состоят из:
1. **Источник события** — элемент, генерирующий событие.
2. **Обработчик события** — метод, выполняющийся при возникновении события.

## **Подключение обработчиков событий**

Обработчик события подключается с помощью оператора `+=`. В качестве обработчика используется метод с определённой сигнатурой.

### Пример: Обработчик события `Click` для кнопки

```csharp
Button myButton = new Button
{
    Text = "Click Me",
    Top = 50,
    Left = 50
};

// Подключение обработчика
myButton.Click += MyButton_Click;

// Метод-обработчик
private void MyButton_Click(object sender, EventArgs e)
{
    MessageBox.Show("Кнопка нажата!");
}
```

- **`sender`** — объект, вызвавший событие.
- **`EventArgs`** — класс, содержащий дополнительную информацию о событии.


### **События формы**

| **Событие**        | **Описание**                                                                                  |
|---------------------|----------------------------------------------------------------------------------------------|
| `Load`             | Возникает при загрузке формы. Используется для инициализации данных.                         |
| `FormClosing`       | Вызывается перед закрытием формы. Позволяет отменить закрытие.                               |
| `Shown`            | Возникает, когда форма впервые отображается пользователю.                                    |
| `Resize`           | Срабатывает при изменении размеров формы.                                                   |
| `KeyDown`          | Срабатывает при нажатии клавиши клавиатуры, если форма активна.                              |

### Пример: Инициализация формы при загрузке
```csharp
this.Load += (sender, e) =>
{
    MessageBox.Show("Форма загружена!");
};
```

## Основные элементы управления

### 1. **Label** — простая текстовая метка. Предназначена для подписи элементов управления и вывода текста пользователю
   ```csharp
   NameLabel.Text = "Иван";
   ```
   | **Основные свойства** | **Тип**     | **Описание**                          |
   |-----------------------|-------------|----------------------------------------|
   | `Text`                | `string`   | Отображаемый текст                     |
   | `TextAlign`           | `ContentAlignment` | Выравнивание текста               |
   | `Font`                | `Font`     | Шрифт текста                          |
   | `ForeColor`           | `Color`    | Цвет текста                           |
   | `AutoSize`            | `bool`     | Указывает, автоматически ли изменять размер метки под текст |

   | **Основные события** | **Описание**                                    |
   |----------------------|------------------------------------------------|
   | `Click`              | Возникает при нажатии на метку                 |
   | `MouseEnter`         | Возникает при наведении курсора на метку       |
   | `MouseLeave`         | Возникает при уходе курсора с метки            |

---

### 2. **TextBox** — текстовое поле для ввода данных. Позволяет ввод простых текстовых данных
   ```csharp
   if (LoginTextBox.Text == "admin")
   {
        MessageBox.Show("Вы администратор!");
   }
   ```
   |**Основные свойства**|**Тип**     |**Описание**|
   |-----------------|--------|--------|
   |`Text`           |`string`|Содержит текст, введенный в текстовое поле|
   |`Multiline`      |`bool`  |Позволяет ввоодить многострочный текст в поле ввода|
   |`UseSystemPasswordChar`|`bool`|Указывает, должен ли текст в поле ввода скрываться |
   |`MaxLength`      |`int`   |Указывает максимальное количество символов, которые можно ввести в поле ввода|
   |`PlaceholderText`|`string`|Позволяет указать текст-заполнитель для пустого поля|
   
   |**Основные события**|**Описание**|
   |----------------|--------|
   |`TextChanged`   |Возникает при изменении текста в поле ввода|
   |`KeyPress`      |Возникает при нажатии клавиши клавиатуры при установленном курсоре в поле ввода|
   
---

### 3. **Button** — кнопка. Используется для выполнения действий при нажатии.  
   ```csharp
   Button loginButton = new Button
   {
       Text = "Войти"
   };
   loginButton.Click += (sender, e) =>
   {
       MessageBox.Show("Вы нажали кнопку!");
   };
   ```

   | **Основные свойства** | **Тип**      | **Описание**                                      |
   |-----------------------|--------------|--------------------------------------------------|
   | `Text`                | `string`    | Текст, отображаемый на кнопке                   |
   | `Enabled`             | `bool`      | Указывает, активна ли кнопка для нажатия        |
   | `BackColor`           | `Color`     | Фон кнопки                                      |
   | `ForeColor`           | `Color`     | Цвет текста кнопки                              |
   | `FlatStyle`           | `FlatStyle` | Задает стиль отображения кнопки                |

   | **Основные события** | **Описание**                                    |
   |----------------------|------------------------------------------------|
   | `Click`              | Возникает при нажатии на кнопку                |
   | `MouseEnter`         | Возникает при наведении курсора на кнопку      |
   | `MouseLeave`         | Возникает при уходе курсора с кнопки          |

---


### 4. **CheckBox** — флажок. Используется для включения или отключения какого-либо параметра.  
   ```csharp
   CheckBox rememberMeCheckBox = new CheckBox
   {
       Text = "Запомнить меня"
   };
   if (rememberMeCheckBox.Checked)
   {
       MessageBox.Show("Вы выбрали запомнить логин!");
   }
   ```

   | **Основные свойства** | **Тип**     | **Описание**                          |
   |-----------------------|-------------|----------------------------------------|
   | `Checked`             | `bool`     | Указывает, установлен ли флажок       |
   | `Text`                | `string`   | Текст, отображаемый рядом с флажком   |
   | `CheckAlign`          | `ContentAlignment` | Выравнивание флажка относительно текста |

   | **Основные события** | **Описание**                                    |
   |----------------------|------------------------------------------------|
   | `CheckedChanged`     | Возникает при изменении состояния флажка       |
   | `Click`              | Возникает при нажатии на элемент               |

---

### 5. **ComboBox** — выпадающий список. Позволяет выбрать один элемент из списка.  
   ```csharp
   ComboBox colorsComboBox = new ComboBox();
   colorsComboBox.Items.AddRange(new string[] { "Красный", "Зеленый", "Синий" });
   colorsComboBox.SelectedIndexChanged += (sender, e) =>
   {
       MessageBox.Show($"Вы выбрали цвет: {colorsComboBox.SelectedItem}");
   };
   ```

   | **Основные свойства** | **Тип**     | **Описание**                          |
   |-----------------------|-------------|----------------------------------------|
   | `Items`               | `ObjectCollection` | Список элементов                  |
   | `SelectedItem`        | `object`   | Текущий выбранный элемент             |
   | `Text`                | `string`   | Текст выбранного элемента             |
   | `DropDownStyle`       | `ComboBoxStyle` | Указывает стиль списка (простое, раскрывающееся меню и т.д.) |

   | **Основные события** | **Описание**                                    |
   |----------------------|------------------------------------------------|
   | `SelectedIndexChanged`| Возникает при изменении выбранного элемента    |
   | `TextChanged`        | Возникает при изменении текста в поле          |

---

### 6. **ListBox** — список. Позволяет отображать набор элементов для выбора.  
   ```csharp
   ListBox fruitsListBox = new ListBox();
   fruitsListBox.Items.AddRange(new string[] { "Яблоко", "Банан", "Апельсин" });
   fruitsListBox.SelectedIndexChanged += (sender, e) =>
   {
       MessageBox.Show($"Вы выбрали: {fruitsListBox.SelectedItem}");
   };
   ```

   | **Основные свойства** | **Тип**     | **Описание**                          |
   |-----------------------|-------------|----------------------------------------|
   | `Items`               | `ObjectCollection` | Список элементов                  |
   | `SelectedItem`        | `object`   | Текущий выбранный элемент             |
   | `SelectionMode`       | `SelectionMode` | Указывает, сколько элементов можно выбрать одновременно |

   | **Основные события** | **Описание**                                    |
   |----------------------|------------------------------------------------|
   | `SelectedIndexChanged`| Возникает при изменении выбранного элемента    |
